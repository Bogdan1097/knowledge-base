# Atomic Swaps

Atomic Swaps feature allows users to easily exchange tokens issued in the TokenD system with any other asset managed in external systems. Such an approach is highly useful in cases when deposit of external system assets is not desirable due to legal limitations or UX requirements. Flow described in this document requires an intermediate trusted entity, which will send confirmations of transfer from external systems to the TokenD system.

1. Token issuer creates a request to sell tokens using [ManageASSellRequest](/tech/sell_as.md). Specifies the amount, token, price, and identifier in external system. Amount of tokens specified in the request is locked on the token issuer balance. Token issuer is able to cancel this request at any moment.
1. Users willing to purchase tokens create a request specifying amount of tokens to be bought using [CreateASBuyRequest](/tech/buy_as.md). Corresponding amount of tokens is locked (locking period can be specified by admin of the system using [ManageKeyValueOp](/tech/manage_key_value.md)). Unique identifier is set for the request, which can be used to link transfer in external system with request in TokenD.
1. User performs a transfer in external system specifying unique identifier of the request. (For systems which use acquiring provider this step can be performed without the need to provide user with ID of the request)
1. Intermediate system monitors requests from TokenD system using [/request](https://tokend.gitlab.io/horizon-docs/#reviewable-requests). In case of corresponding transfer in external system, this module approves the request and corresponding amount of tokens is transferred to the user via [ReviewRequestOp](/tech/review_request_op.md). This module is also responsible for rejections of requests in case of expiration.
1. User is able to see purchased token in their account.
